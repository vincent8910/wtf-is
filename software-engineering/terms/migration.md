# Migration（資料庫遷移）— 裝潢施工紀錄

> **白話說：** Migration 就像房子的裝潢施工紀錄——第一次加了一面牆、第二次拆了一扇門、第三次把廚房改大。每次改動都留下紀錄，想回到以前的樣子也能照著拆回去。

---

## 它到底是什麼？

[資料庫](database.md)就像一棟房子，裡面有各種房間（資料表）、牆壁（欄位）、門窗（關聯）。隨著產品發展，你會需要不斷修改資料庫的結構：

- 新增一個「會員等級」欄位
- 把「電話」欄位從必填改成選填
- 新增一張「訂單紀錄」表

**Migration 就是用程式碼來管理這些結構變更，而且每次變更都有編號和紀錄。**

```
Migration #001：新增「users」資料表（蓋了一間房間）
Migration #002：在 users 裡加「phone」欄位（牆上開了一扇窗）
Migration #003：新增「orders」資料表（又蓋了一間房間）
Migration #004：把 phone 改成選填（窗戶改成可以關的）
```

這些紀錄就像施工日誌，所有開發者都能看到資料庫經歷了哪些變更。最重要的是——每筆 Migration 都能「反向執行」，如果第 4 次改壞了，可以退回第 3 次的狀態。

## 生活比喻 / 實際例子

想像你在裝潢新家：

| 動作 | Migration 術語 |
|------|---------------|
| 按照設計圖施工 | 執行 Migration（migrate up） |
| 發現不對，拆掉改回來 | 回滾 Migration（migrate down / [rollback](rollback.md)） |
| 所有施工紀錄 | Migration 歷史 |
| 把空屋從頭裝潢到最新狀態 | 跑全部 Migration |

如果沒有 Migration，改資料庫就像沒有施工紀錄的裝潢——你不知道之前改了什麼、別人改了什麼、想恢復也不知道怎麼恢復。

**造句：**「我新增了一筆 **Migration**，幫 users 表加上 email 欄位。你 pull 完程式碼記得跑一下 `migrate`。」

## 為什麼要知道這個詞？

- 只要專案有用[資料庫](database.md)，幾乎一定會用到 Migration
- 團隊協作時，每個人的資料庫結構要一致——Migration 確保所有人「照著同一份施工紀錄」更新
- 新人加入專案時，只要跑一次全部 Migration，就能建立出跟大家一模一樣的資料庫結構
- 如果工程師說「跑一下 migration」，就是「更新你本機的資料庫結構到最新版本」

---
**[← 回到軟體工程術語總覽](../README.md)**
