# Middleware（中介層）— 大樓門口的管理員

> **白話說：** 請求送到後端處理之前，先經過的「關卡」，負責檢查、過濾、加工。

---

## 它到底是什麼？

**Middleware** 就是擋在「請求進來」到「正式處理」之間的關卡。每個請求都要先過這些關卡，才能進到真正處理業務的地方。

想像你去一棟大樓拜訪朋友——

```
你走進大門
  → 關卡 1：管理員確認你的身份（驗證 middleware）
  → 關卡 2：登記訪客資料（記錄 middleware）
  → 關卡 3：檢查你有沒有帶違禁品（安全檢查 middleware）
  → 全部通過！可以上樓找朋友了（正式處理請求）
```

**管理員不負責你去找朋友要聊什麼（業務邏輯），他只負責在你進大樓之前做好把關。**

## 生活比喻 / 實際例子

也像機場安檢——你要搭飛機（使用服務），但在登機之前要先過好幾道關卡：護照查驗、行李 X 光、安全門。這些關卡就是 middleware，它們不管你要飛去哪，只管你有沒有資格上飛機。

### 常見情境

- **後端工程師：**「我在 middleware 加了身份驗證，沒登入的人打這個 API 會被擋掉。」
- **工程師：**「log middleware 會自動記錄每個 API 被呼叫的時間和參數。」
- **PM：**「為什麼這個 API 回傳 401？」→ 「middleware 擋掉了，因為 token 過期。」

## 為什麼要知道這個詞？

當工程師說「在 middleware 處理」，他的意思是「在請求正式被處理之前先做某些事」。最常見的就是驗證使用者身份（[Auth](auth.md)）。知道這個概念，你就能理解為什麼有些 API 打了會被擋——是在中介層就被攔下來了。

---
**[← 回到術語總覽](../README.md)**
